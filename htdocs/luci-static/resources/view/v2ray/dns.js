/**
 * @license
 * Copyright 2020 Xingwang Liao <kuoruan@gmail.com>
 *
 * Licensed to the public under the MIT License.
 */
"use strict";"require form";"require v2ray";return L.view.extend({load:function(){return Promise.all([v2ray.getSections("dns_server"),v2ray.getSections("fakedns_server","ip_pool")])},render:function(e){var o,a=void 0===e?[]:e,r=a[0],t=void 0===r?[]:r,s=a[1],i=void 0===s?[]:s,n=new form.Map("v2ray","%s - %s".format(_("V2Ray"),_("DNS")),_("Details: %s").format('<a href="https://www.v2ray.com/en/configuration/dns.html#dnsobject" target="_blank">DnsObject</a>')),l=n.section(form.NamedSection,"main_dns","dns");l.anonymous=!0,l.addremove=!1,(o=l.option(form.Flag,"enabled",_("Enabled"))).rmempty=!1,o=l.option(form.Flag,"disable_cache",_("Disable cache")),o=l.option(form.Flag,"disable_fallback",_("Disable fallback")),o=l.option(form.Value,"tag",_("Tag")),(o=l.option(form.Value,"client_ip",_("Client IP"),'<a href="https://icanhazip.com" target="_blank">%s</a>'.format(_("Get my public IP address")))).datatype="ipaddr",o=l.option(form.DynamicList,"hosts",_("Hosts"),_("A list of static addresses, format: <code>domain|address</code>. eg: %s").format("google.com|127.0.0.1")),o=l.option(form.MultiValue,"servers",_("DNS Servers"),_("Select DNS servers to use"));for(var d=0,m=t;d<m.length;d++){var p=m[d];o.value(p.value,p.caption)}if(i.length){o=l.option(form.MultiValue,"pools",_("Fake DNS Servers"),_("Select Fake DNS servers to use"));for(var c=0,f=i;c<f.length;c++){p=f[c];o.value(p.value,p.caption)}}(o=l.option(form.ListValue,"query_strategy",_("Query strategy"))).value(""),o.value("UseIP"),o.value("UseIPv4"),o.value("UseIPv6");var v=n.section(form.GridSection,"dns_server",_("DNS server"),_("Add DNS servers here"));v.anonymous=!0,v.addremove=!0,v.sortable=!0,v.nodescription=!0,o=v.option(form.Flag,"skip_fallback",_("Skip fallback")),(o=v.option(form.Value,"alias",_("Alias"))).rmempty=!1,o=v.option(form.Value,"address",_("Address")),(o=v.option(form.Value,"port",_("Port"))).datatype="port",o.placeholder="53",(o=v.option(form.Value,"client_ip",_("Client IP"))).datatype="ipaddr",(o=v.option(form.DynamicList,"domains",_("Domains"))).modalonly=!0,(o=v.option(form.DynamicList,"expect_ips",_("Expect IPs"))).modalonly=!0;var u=n.section(form.TypedSection,"fakedns_server",_("Fake DNS server"),_("Add fake DNS servers here"));return u.anonymous=!0,u.addremove=!0,(o=u.option(form.Value,"ip_pool",_("IP pool"))).rmempty=!1,(o=u.option(form.Value,"pool_size",_("Pool size"))).placeholder="65535",n.render()}});