/**
 * @license
 * Copyright 2020 Xingwang Liao <kuoruan@gmail.com>
 *
 * Licensed to the public under the MIT License.
 */
"use strict";"require form";"require uci";"require v2ray";return L.view.extend({load:function(){return Promise.all([v2ray.getSections("routing_rule"),v2ray.getSections("routing_balancer","tag")])},render:function(o){var e,a=void 0===o?[]:o,t=a[0],r=void 0===t?[]:t,n=a[1],i=void 0===n?[]:n,l=new form.Map("v2ray","%s - %s".format(_("V2Ray"),_("Routing")),_("Details: %s").format('<a href="https://www.v2ray.com/en/configuration/routing.html#routingobject" target="_blank">RoutingObject</a>')),u=l.section(form.NamedSection,"main_routing","routing");u.anonymous=!0,u.addremove=!1,e=u.option(form.Flag,"enabled",_("Enabled")),(e=u.option(form.ListValue,"domain_strategy",_("Domain resolution strategy"))).value(""),e.value("AsIs"),e.value("IPIfNonMatch"),e.value("IPOnDemand"),(e=u.option(form.ListValue,"domain_matcher",_("Domain Matcher"))).value(""),e.value("linear",_("linear")),e.value("mph",_("mph")),e=u.option(form.MultiValue,"rules",_("Rules"),_("Select routing rules to use"));for(var m=0,s=r;m<s.length;m++){var c=s[m];e.value(c.value,c.caption)}if(i.length){e=u.option(form.MultiValue,"balancers",_("Balancers"),_("Select routing balancers to use"));for(var d=0,p=i;d<p.length;d++){c=p[d];e.value(c.value,c.caption)}}var v=l.section(form.GridSection,"routing_rule",_("Routing Rule"),_("Add routing rules here"));v.anonymous=!0,v.addremove=!0,v.sortable=!0,v.nodescription=!0,(e=v.option(form.Value,"alias",_("Alias"))).rmempty=!1,(e=v.option(form.ListValue,"type",_("Type"))).value("field"),(e=v.option(form.DynamicList,"domain",_("Domain"))).modalonly=!0,(e=v.option(form.ListValue,"domain_matcher",_("Domain Matcher"))).modalonly=!0,e.value(""),e.value("linear",_("linear")),e.value("mph",_("mph")),(e=v.option(form.DynamicList,"ip",_("IP"))).modalonly=!0,(e=v.option(form.DynamicList,"port",_("Port"))).modalonly=!0,e.datatype="or(port, portrange)",(e=v.option(form.MultiValue,"network",_("Network"))).value("tcp"),e.value("udp"),(e=v.option(form.DynamicList,"source",_("Source"))).modalonly=!0,(e=v.option(form.DynamicList,"user",_("User"))).modalonly=!0,e=v.option(form.DynamicList,"inbound_tag",_("Inbound tag")),(e=v.option(form.MultiValue,"protocol",_("Protocol"))).modalonly=!0,e.value("http"),e.value("tls"),e.value("bittorrent"),(e=v.option(form.Value,"attrs",_("Attrs"))).modalonly=!0,e=v.option(form.Value,"outbound_tag",_("Outbound tag")),(e=v.option(form.Value,"balancer_tag",_("Balancer tag"))).modalonly=!0,e.depends("outbound_tag","");var f=l.section(form.TypedSection,"routing_balancer",_("Routing Balancer"),_("Add routing balancers here"));return f.anonymous=!0,f.addremove=!0,(e=f.option(form.Value,"tag",_("Tag"))).rmempty=!1,e=f.option(form.DynamicList,"selector",_("Selector")),l.render()}});